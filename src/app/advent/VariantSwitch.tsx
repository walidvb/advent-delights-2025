'use client';

import { motion } from 'motion/react';
import { useAdventDay } from './AdventDayContext';
import { cn } from '@/lib/utils';

const DiscoBall = (props: any) => (
  <svg
    width="17"
    height="16"
    viewBox="0 0 17 16"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
    {...props}
  >
    <path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M7.50136 15.5096C6.7684 15.5096 6.05675 15.362 5.38772 15.0722C4.74086 14.7919 4.16045 14.3911 3.66186 13.8803C3.16327 13.3695 2.77124 12.7749 2.49851 12.1121C2.21555 11.4258 2.07153 10.6976 2.07153 9.9467C2.07153 9.19577 2.21557 8.46669 2.49851 7.78126C2.77209 7.11854 3.16329 6.5239 3.66186 6.01309C4.16045 5.50228 4.74083 5.10065 5.38772 4.82124C6.05761 4.53134 6.7684 4.38379 7.50136 4.38379C8.23432 4.38379 8.94596 4.53135 9.61499 4.82124C10.2619 5.10152 10.8423 5.50231 11.3409 6.01309C11.8394 6.52388 12.2315 7.11851 12.5042 7.78126C12.7872 8.46756 12.9312 9.19577 12.9312 9.9467C12.9312 10.6976 12.7871 11.4267 12.5042 12.1121C12.2306 12.7749 11.8394 13.3695 11.3409 13.8803C10.8423 14.3911 10.2619 14.7927 9.61499 15.0722C8.94596 15.3621 8.23432 15.5096 7.50136 15.5096ZM7.50136 4.90515C4.78936 4.90515 2.58201 7.1666 2.58201 9.94507C2.58201 12.7235 4.78936 14.985 7.50136 14.985C10.2134 14.985 12.4207 12.7235 12.4207 9.94507C12.4216 7.1666 10.2151 4.90515 7.50136 4.90515Z"
      fill="currentColor"
    />
    <path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M11.8419 7.31859H3.16243C3.0218 7.31859 2.90674 7.20071 2.90674 7.05663C2.90674 6.91255 3.02179 6.79468 3.16243 6.79468H11.8419C11.9825 6.79468 12.0976 6.91255 12.0976 7.05663C12.0976 7.20071 11.9817 7.31859 11.8419 7.31859Z"
      fill="currentColor"
    />
    <path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M12.6774 10.2068H2.32576C2.18513 10.2068 2.07007 10.0889 2.07007 9.94481C2.07007 9.80074 2.18512 9.68286 2.32576 9.68286H12.6774C12.818 9.68286 12.9331 9.80074 12.9331 9.94481C12.9331 10.0898 12.8189 10.2068 12.6774 10.2068Z"
      fill="currentColor"
    />
    <path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M11.8419 13.0969H3.16243C3.0218 13.0969 2.90674 12.979 2.90674 12.835C2.90674 12.6909 3.02179 12.573 3.16243 12.573H11.8419C11.9825 12.573 12.0976 12.6909 12.0976 12.835C12.0976 12.9799 11.9817 13.0969 11.8419 13.0969Z"
      fill="currentColor"
    />
    <path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M7.5014 15.5094C6.70878 15.5094 5.97668 14.9069 5.44316 13.8111C4.93691 12.7738 4.6582 11.4012 4.6582 9.94469C4.6582 8.48817 4.93774 7.1157 5.44316 6.0783C5.97838 4.98336 6.70878 4.38086 7.5014 4.38086C8.29401 4.38086 9.02612 4.98334 9.55964 6.0783C10.0659 7.11561 10.3446 8.48817 10.3446 9.94469C10.3446 11.4012 10.0651 12.7737 9.55964 13.8111C9.02612 14.9069 8.29486 15.5094 7.5014 15.5094ZM7.5014 4.90492C6.91248 4.90492 6.34316 5.40438 5.89998 6.31247C5.42954 7.27818 5.16958 8.56877 5.16958 9.94482C5.16958 11.3209 5.42952 12.6115 5.89998 13.5772C6.34316 14.4853 6.91248 14.9847 7.5014 14.9847C8.09031 14.9847 8.65964 14.4853 9.10281 13.5772C9.57325 12.6115 9.83321 11.3209 9.83321 9.94482C9.83321 8.56877 9.57327 7.27811 9.10281 6.31247C8.65964 5.40612 8.09031 4.90492 7.5014 4.90492Z"
      fill="currentColor"
    />
    <path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M7.50154 15.5095C7.36091 15.5095 7.24585 15.3916 7.24585 15.2475V4.64306C7.24585 4.49899 7.36091 4.3811 7.50154 4.3811C7.64216 4.3811 7.75722 4.49898 7.75722 4.64306V15.2475C7.75722 15.3925 7.64302 15.5095 7.50154 15.5095Z"
      fill="currentColor"
    />
    <path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M7.50137 4.9051C6.86131 4.9051 6.34058 4.3716 6.34058 3.71586C6.34058 3.06011 6.86131 2.52661 7.50137 2.52661C8.14143 2.52661 8.66216 3.06011 8.66216 3.71586C8.66301 4.3716 8.14143 4.9051 7.50137 4.9051ZM7.50137 3.04963C7.14342 3.04963 6.85193 3.34824 6.85193 3.71498C6.85193 4.08173 7.1434 4.38034 7.50137 4.38034C7.85934 4.38034 8.15081 4.08173 8.15081 3.71498C8.15166 3.34913 7.86019 3.04963 7.50137 3.04963Z"
      fill="currentColor"
    />
    <path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M7.56364 2.91763C7.44364 2.91763 7.34546 2.86245 7.34546 2.79501V1.25202C7.34546 1.18458 7.44364 1.12939 7.56364 1.12939C7.68364 1.12939 7.78182 1.18457 7.78182 1.25202V2.79501C7.78182 2.86286 7.68437 2.91763 7.56364 2.91763Z"
      fill="currentColor"
    />
    <path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M2.99798 5.46896C2.89912 5.46896 2.80963 5.41133 2.76701 5.31965L2.33746 4.39149L1.43065 3.9514C1.34116 3.90774 1.28491 3.81606 1.28491 3.71477C1.28491 3.61349 1.34116 3.52181 1.43065 3.47815L2.33746 3.03806L2.76787 2.10903C2.81048 2.01735 2.89997 1.95972 2.99883 1.95972C3.0977 1.95972 3.18718 2.01735 3.2298 2.10903L3.65936 3.03806L4.56616 3.47815C4.65565 3.5218 4.7119 3.61349 4.7119 3.71477C4.7119 3.81606 4.65565 3.90774 4.56616 3.9514L3.65848 4.39149L3.2298 5.31965C3.18719 5.41133 3.09684 5.46896 2.99798 5.46896ZM2.13719 3.7139L2.63918 3.9575C2.69202 3.98369 2.73464 4.02735 2.76021 4.08149L2.99798 4.59578L3.23575 4.08149C3.26132 4.02735 3.30394 3.98369 3.35678 3.9575L3.85877 3.7139L3.35678 3.47029C3.30394 3.4441 3.26132 3.40044 3.23575 3.3463L2.99798 2.83201L2.76021 3.3463C2.73464 3.40044 2.69202 3.4441 2.63918 3.47029L2.13719 3.7139Z"
      fill="currentColor"
    />
    <path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M14.1739 14.6356C14.075 14.6356 13.9855 14.578 13.9429 14.4863L13.5134 13.5573L12.6066 13.1172C12.5171 13.0735 12.4608 12.9818 12.4608 12.8805C12.4608 12.7793 12.5171 12.6876 12.6066 12.6439L13.5134 12.2038L13.9429 11.2748C13.9855 11.1831 14.075 11.1255 14.1739 11.1255C14.2728 11.1255 14.3622 11.1831 14.4049 11.2748L14.8344 12.2038L15.7412 12.6439C15.8307 12.6876 15.887 12.7793 15.887 12.8805C15.887 12.9818 15.8307 13.0735 15.7412 13.1172L14.8344 13.5573L14.4049 14.4863C14.3622 14.578 14.2719 14.6356 14.1739 14.6356ZM13.3114 12.8805L13.8134 13.1241C13.8662 13.1503 13.9088 13.194 13.9344 13.2481L14.1722 13.7624L14.41 13.2481C14.4355 13.194 14.4781 13.1503 14.531 13.1241L15.033 12.8805L14.531 12.6369C14.4781 12.6107 14.4355 12.5671 14.41 12.5129L14.1722 11.9987L13.9344 12.5129C13.9088 12.5671 13.8662 12.6107 13.8134 12.6369L13.3114 12.8805Z"
      fill="currentColor"
    />
  </svg>
);

const Peace = (props: any) => (
  <svg
    width="17"
    height="16"
    viewBox="0 0 17 16"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
    {...props}
  >
    <path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M9.3899 14.8529C8.66233 14.8529 7.95592 14.709 7.29181 14.4263C6.6497 14.153 6.07356 13.7621 5.57863 13.264C5.08371 12.7658 4.69456 12.1859 4.42384 11.5396C4.14296 10.8703 4 10.1601 4 9.42781C4 8.69549 4.14298 7.98446 4.42384 7.31601C4.69541 6.6697 5.08373 6.08979 5.57863 5.59164C6.07356 5.09348 6.64967 4.70179 7.29181 4.4293C7.95676 4.14658 8.66233 4.00269 9.3899 4.00269C10.1175 4.00269 10.8239 4.1466 11.488 4.4293C12.1301 4.70264 12.7062 5.0935 13.2012 5.59164C13.6961 6.08977 14.0852 6.66968 14.356 7.31601C14.6368 7.98531 14.7798 8.69549 14.7798 9.42781C14.7798 10.1601 14.6368 10.8712 14.356 11.5396C14.0844 12.1859 13.6961 12.7658 13.2012 13.264C12.7062 13.7621 12.1301 14.1538 11.488 14.4263C10.8239 14.709 10.1175 14.8529 9.3899 14.8529ZM9.3899 4.51113C6.69784 4.51113 4.50673 6.71657 4.50673 9.42622C4.50673 12.1359 6.69784 14.3413 9.3899 14.3413C12.082 14.3413 14.2731 12.1359 14.2731 9.42622C14.2739 6.71657 12.0837 4.51113 9.3899 4.51113Z"
      fill="currentColor"
    />
    <path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M13.3301 12.7666L9.11582 10.3176C9.04754 10.2779 9.04878 10.1459 9.11858 10.0242C9.18838 9.90253 9.30135 9.83544 9.36963 9.87512L13.5839 12.3241C13.6522 12.3638 13.6509 12.4958 13.5811 12.6175C13.5113 12.7392 13.398 12.8061 13.3301 12.7666Z"
      fill="currentColor"
    />
    <path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M9.55562 10.2828L5.28323 12.7656C5.21401 12.8058 5.10027 12.7392 5.03047 12.6175C4.96067 12.4958 4.9602 12.3633 5.02942 12.3231L9.30182 9.84031C9.37104 9.80009 9.48478 9.86673 9.55458 9.98841C9.6248 10.1108 9.62443 10.2428 9.55562 10.2828Z"
      fill="currentColor"
    />
    <path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M9.25381 14.8527C9.11422 14.8527 9 14.7378 9 14.5973V4.25547C9 4.11496 9.11421 4 9.25381 4C9.3934 4 9.50762 4.11496 9.50762 4.25547V14.5973C9.50762 14.7386 9.39425 14.8527 9.25381 14.8527Z"
      fill="currentColor"
    />
    <path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M15.8154 2.56074H15.3551C15.2155 2.56074 15.1013 2.44578 15.1013 2.30527C15.1013 2.16476 15.2155 2.0498 15.3551 2.0498H15.8154C15.9549 2.0498 16.0692 2.16476 16.0692 2.30527C16.0692 2.44663 15.9558 2.56074 15.8154 2.56074Z"
      fill="currentColor"
    />
    <path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M13.9966 2.56074H13.5364C13.3968 2.56074 13.2826 2.44578 13.2826 2.30527C13.2826 2.16476 13.3968 2.0498 13.5364 2.0498H13.9966C14.1362 2.0498 14.2504 2.16476 14.2504 2.30527C14.2504 2.44663 14.1379 2.56074 13.9966 2.56074Z"
      fill="currentColor"
    />
    <path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M14.6767 3.70781C14.5371 3.70781 14.4229 3.59285 14.4229 3.45234V2.98911C14.4229 2.84861 14.5371 2.73364 14.6767 2.73364C14.8163 2.73364 14.9305 2.8486 14.9305 2.98911V3.45234C14.9305 3.59285 14.8163 3.70781 14.6767 3.70781Z"
      fill="currentColor"
    />
    <path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M14.6767 1.877C14.5371 1.877 14.4229 1.76204 14.4229 1.62153V1.1583C14.4229 1.0178 14.5371 0.902832 14.6767 0.902832C14.8163 0.902832 14.9305 1.01779 14.9305 1.1583V1.62153C14.9305 1.76374 14.8163 1.877 14.6767 1.877Z"
      fill="currentColor"
    />
    <path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M3.53313 13.6586H3.0729C2.93331 13.6586 2.81909 13.5437 2.81909 13.4032C2.81909 13.2627 2.9333 13.1477 3.0729 13.1477H3.53313C3.67272 13.1477 3.78693 13.2627 3.78693 13.4032C3.78693 13.5437 3.67357 13.6586 3.53313 13.6586Z"
      fill="currentColor"
    />
    <path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M1.71403 13.6586H1.25381C1.11422 13.6586 1 13.5437 1 13.4032C1 13.2627 1.11421 13.1477 1.25381 13.1477H1.71403C1.85363 13.1477 1.96784 13.2627 1.96784 13.4032C1.96784 13.5437 1.85448 13.6586 1.71403 13.6586Z"
      fill="currentColor"
    />
    <path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M2.39431 14.8047C2.25472 14.8047 2.1405 14.6898 2.1405 14.5493V14.086C2.1405 13.9455 2.25471 13.8306 2.39431 13.8306C2.5339 13.8306 2.64812 13.9455 2.64812 14.086V14.5493C2.64812 14.6898 2.53391 14.8047 2.39431 14.8047Z"
      fill="currentColor"
    />
    <path
      fillRule="evenodd"
      clipRule="evenodd"
      d="M2.39431 12.9742C2.25472 12.9742 2.1405 12.8592 2.1405 12.7187V12.2555C2.1405 12.115 2.25471 12 2.39431 12C2.5339 12 2.64812 12.115 2.64812 12.2555V12.7187C2.64812 12.8601 2.53391 12.9742 2.39431 12.9742Z"
      fill="currentColor"
    />
  </svg>
);

export function VariantSwitch() {
  const { variant, setVariant, currentDayIndex, revealedIndices } =
    useAdventDay();

  const hasUnrevealedTracks =
    currentDayIndex >= 0 &&
    Array.from({ length: currentDayIndex + 1 }, (_, i) => i).some(
      (i) => !revealedIndices.includes(i)
    );

  return (
    <div className="flex flex-col items-center gap-1 pt-[22px]">
      <div className="flex items-center gap-3">
        <div
          className="relative flex items-center gap-1 rounded-full p-px overflow-hidden"
          style={{
            backgroundImage: `url(${
              variant === 'light' ? '/dark.webp' : '/light.webp'
            })`,
            backgroundSize: '100vw 100vh',
            backgroundPosition: 'top',
          }}
        >
          <motion.div
            layoutId="variant-switch-bg"
            className={`absolute inset-y-px rounded-full transition-colors ${
              variant === 'light' ? 'bg-white' : 'bg-zinc-900'
            }`}
            style={{
              left: variant === 'light' ? 1 : '50%',
              right: variant === 'heavy' ? 1 : '50%',
              backgroundImage: `url(${
                variant !== 'light' ? '/dark.webp' : '/light.webp'
              })`,
              backgroundSize: '100vw 100vh',
              backgroundPosition: 'top',
            }}
            transition={{
              type: 'spring',
              stiffness: 100,
              damping: 30,
              duration: 0.2,
            }}
          />
          <button
            onClick={() => setVariant('light')}
            className={`relative z-10 rounded-full cursor-pointer px-10 py-1.5 transition-colors ${
              variant === 'light'
                ? 'text-zinc-900'
                : 'text-zinc-800 hover:text-zinc-900'
            }`}
          >
            <motion.div
              animate={
                hasUnrevealedTracks && variant !== 'light'
                  ? { scale: [1, 1.2, 1, 1.2, 1] }
                  : { scale: 1 }
              }
              transition={
                hasUnrevealedTracks && variant !== 'light'
                  ? { duration: 0.4, repeat: Infinity, repeatDelay: 2.5 }
                  : undefined
              }
            >
              <Peace className="h-8 w-8" />
            </motion.div>
          </button>
          <button
            onClick={() => setVariant('heavy')}
            className={cn(
              `relative z-10 rounded-full cursor-pointer px-10 py-1.5 transition-colors`,
              variant === 'heavy'
                ? 'text-white'
                : 'text-zinc-300 hover:text-zinc-100'
            )}
          >
            <motion.div
              animate={
                hasUnrevealedTracks && variant !== 'heavy'
                  ? { scale: [1, 1.15, 1, 1.15, 1] }
                  : { scale: 1 }
              }
              transition={
                hasUnrevealedTracks && variant !== 'heavy'
                  ? { duration: 0.4, repeat: Infinity, repeatDelay: 2.5 }
                  : undefined
              }
            >
              <DiscoBall className="h-8 w-8" />
            </motion.div>
          </button>
        </div>
      </div>
      <span
        className={`text-[12px] font-medium ${
          variant === 'light' ? 'text-zinc-600' : 'text-zinc-400'
        }`}
      >
        {variant === 'light' ? (
          'soothe your mind'
        ) : (
          <>
            get{' '}
            <a
              href="https://www.youtube.com/watch?v=I1188GO4p1E"
              target="_blank"
              rel="noopener noreferrer"
            >
              schwifty
            </a>
          </>
        )}
      </span>
    </div>
  );
}
